# vim: setw ft=sh sw=2 ts=8 et :
deploy_reqmgroffsite_deps()
{
  deploy CouchDBOffsite
  deploy MySQL
  deploy WMAgent
}

deploy_reqmgroffsite_prep()
{
  mkproj reqmgr config install
}

deploy_reqmgroffsite_sw()
{
   true;
}

deploy_reqmgroffsite_post()
{
  local wmcore_root=$root/projects/wmagent/wmcore
  local wmcore_etc=$wmcore_root/etc
  local reqmgr_root=$root/projects/reqmgr


  # get manage script from wmcore
  /bin/cp $wmcore_etc/deploy/wmagent-manage  $reqmgr_root/config/manage
  #override the webtools couch config
  local couchdb_root=$root/projects/couchdb
  local couchdb_ini=$couchdb_root/config/local.ini
  /bin/cp $wmcore_etc/deploy/wmagent-couch.ini $couchdb_ini
  perl -p -i -e "s{deploy_project_root}{$root/projects}g" $couchdb_ini

  #Grab the WMAgent MySQL config
  local mysql_root=$root/projects/mysql
  /bin/cp $wmcore_etc/deploy/wmagent-mysql.cnf $mysql_root/config/my.cnf
}
