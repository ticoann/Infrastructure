# vim: set ft=sh sw=2 ts=8 et :
deploy_filemover_variants="default prod preprod dev"

deploy_filemover_deps()
{
  deploy backend
  deploy wmcore-auth
  deploy admin
}

deploy_filemover_prep()
{
  mkproj download
  mkproxy
}

deploy_filemover_sw()
{
  deploy_pkg comp cms+filemover 1.1.1
  case $variant in dev ) suff="-dev";; preprod ) suff="-testbed";; * ) suff="";; esac
  perl -p -i -e "s|cmsweb.cern.ch/|cmsweb${suff}.cern.ch/|g" $project_config/fm_config.py
}

deploy_filemover_post()
{
  case $host in vocms10[67] | vocms13[2689] | vocms16[13] ) disable ;; * ) enable ;; esac
  (mkcrontab; sysboot) | crontab -
}
